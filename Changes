Thu Oct  9 22:36:16 2008  fox

      83* linux_types.h: Add _LITTLE_ENDIAN definition, else dt_link.c
          generates bad ELF .o files.

Wed Oct  8 22:38:54 2008  fox

      82* libdtrace/dt_link.c: Some changes to allow dtrace -G to work.
          Not there yet.

      81* usdt/ New directory to create a simple USDT so we can
          get things sorted.

Sat Aug  2 11:58:07 2008  fox

      80* Archive: 1.0042

      79* dt_module.c: Fixes for 64b kernels - we can now see kernel stack
          traces.

Tue Jul 29 21:27:11 2008  fox

      78* makefile: Build libelf/Gelf structures properly for 32b machines.

Sun Jul 27 08:56:23 2008  fox

      77* dtrace_isa.c: Add in support for getstack to handle stack()
          calls. Not brilliant with -fomit-frame-pointer in the kernel,
	  but that will teach people to use this option :-(

      76* dt_module.c: Add support for reading /proc/kallsyms so we
          can get kernel level stack traces.

Thu Jul 24 08:54:01 2008  fox

      75* dtrace.c: dtrace_probe: Fix issue with 32-bit arguments
          not being sign extended when stored in return struct. Without
	  this, arg0 is never < 0 for failed syscalls.

      74* load.pl: rewrite load shell script as perl as we want to do some
          extra things for some kernels.

      73* fbt_linux.c: Add support for i386/modules[] on 2.6.23.1

Wed Jul 23 07:32:30 2008  fox

      72* fbt_linux.c: Implement work around for 2.6.23.1 kernel
          without public sys_call_table.

      71* dtrace_linux.c: par_alloc should memset the memory
          to zero to avoid firing a signal when it wasnt asked for.

      70* systrace.c, dtrace.c: Implement support for raise/stop actions
          which can send a signal to a process.

      69* load: Detect missing symbols and try to warn user something
          may fail.

Wed Jul 16 22:55:01 2008  fox

      68* systrace.c: Avoid bogus syscalls which can index
          off the end of the array. Likely due to bad stack reference.
	  Avoids SIGKILL near kernel panic when it happens.
	  Trying to bootstrap ustack() call which involves 
	  examining to the proc in user space to grab the symbol
	  table. Race condition (which is catered for) -- the proc
	  may no longer exist by the time dtrace is running.

Sun Jul 13 10:53:44 2008  fox

      67* Archive: 1.0037

      66* Pisadep.c: Got rid of most of our stubs and use proper libproc
          code. This code wont work since its depending on Solaris /procfs
	  but we can start to work our way through this.

Sat Jul 12 10:59:36 2008  fox

      65* Archive: 1.0039

      64* libproc: Upgrade complete.

      63* libproc: Start upgrade to Solaris 20080623, since we cannot
          call ustack() without starting to emulate /procfs on Solaris.

      62* dtrace_isa.c: Fix issue with coying to/from user space.
          arg0/arg1/... now works.

Sun Jul  6 10:29:42 2008  fox

      61* Archive: 1.0035

      60* fasttrap_isa.c: Merged/compiled in - we have some TODOxxx items
          to fix before we can use this.

      59* fasttrap.c: Now compiles, but need to implement timeout()
          function. Next, get fasttrap_isa.c to compile.

Sat Jul  5 14:53:52 2008  fox

      58* dtrace.c, dtrace_linux.c: Implement a parallel shadow to curthread
          so we dont die when doing thread local variables (dt9 test).
	  We now need a garbage collector - otherwise we may leak memory,
	  or have an issue when a new thread comes along on the same address.

	  dt9: demo/vars/rtime.d no longer panics the kernel.

Fri Jul  4 20:35:34 2008  fox

      57* dt_lex.l: Another attempt at fixing the lexing issues with
          flex.

      56* dtrace.c, fasttrap.c: Upgrade to latest ON Solaris release
          20080623.

Thu Jul  3 23:16:19 2008  fox

      55* Move cmd/dtrace/demo to toplevel dir so its more accessible.
          Create tools/runtests.sh so we can start proving the quality
	  of the yacc/lex port.

      54* Archive: 1.0032

      53* profile.c: Now shows up in dtrace -l; allow us to talk to
          /dev/dtrace_profile driver to change max profile probes.

Wed Jul  2 20:46:02 2008  fox

      52* profile.c: Add missing profile driver. Not yet proven and the
          omni support is missing...

      51* utils/libgcc.pl: Script to locate your libgcc.a file rather than
          me supply one.

      50* Mojmir Svoboda: Fix for raw_local_irq_disable() /
          raw_local_irq_enable() to be more backward kernel compliant.
	  Mojmir suggests issues with kmem_cache_create - I think kernel
	  code changed function calling so need to incorporate a kernel
	  specific fix.

Tue Jul  1 21:53:15 2008  fox

      49* dt_lex.l: Lets hope this works because I am mightily sick
         of flex - getting it to work on all platforms. Its an
	 embarrassment.

      48* Archive: 1.0031

      47* put dtrace binary in build/ directory.

      46* dt_lex.l, makefile, dt_impl.h: Get lex to build us properly so
          we can parse the scripts.

Mon Jun 30 20:50:07 2008  fox

      45* cyclic_linux.c: Enable linux cyclic timer code.

Sun Jun 29 11:50:58 2008  fox

      44* Archive: 1.0030

      43* dtrace_linux.c: syscall tracing finally working on 32-bit kernel.

      42* Archive: 1.0029

      41* liblinux/proc2.c: Fix gethrtime and pthread_cond_reltimedwait_np()
          to avoid dtrace eating lots of cpu and filling /var/log/messages.

Thu Jun 26 22:51:51 2008  fox

      40* i386 kernel sys_call_table patching now works, just need to get the
          syscall collector to work.

Mon Jun 23 23:13:08 2008  fox

      39* divmod64.c: Fix the 64-bit divide issue.

Wed Jun 18 23:19:11 2008  fox

      38* Archive: 1.0027

      37* More 32-bit portability changes.

Tue Jun 17 23:02:33 2008  fox

      36* Various: changes to build 32-bit dtrace + driver

Mon Jun 16 22:57:02 2008  fox

      35* cyclic.c: Need the full whack from Solaris. Without this, the
          D Engine will kill us after a while because it thinks we are hanging
	  and may endanger the system stability.

	  We could just write our own, but its doing a lot of complex
	  and well thought out issues to do with accuracy and 
	  cpu alignment, and its not worth hacking this. FreeBSD has
	  its own (slightly simplified) version of the Solaris code.

Sun Jun 15 09:39:19 2008  fox

      34* dtrace_linux.c, fbt_linux.c: Add a (slow/horrid) parallel 
          allocator. Avoids reprobing modules.

      33* Archive: 1.0026

      32* syscall tracing now working !

Sat Jun 14 00:20:36 2008  fox

      31* Archive: 1.0025

      30* dtrace.c: Fix kernel panic when creating an ecb event.
          dt4 now works for BEGIN/END functionality but syscalls not
	  being triggered.

Mon Jun  9 22:05:12 2008  fox

      29* Archive: 1.0024

      28* fbt_linux.c, dtrace_linux.c: Implement a validate_ptr() function
          since we were dying due to bad VM inside the kernel.

Mon Jun  2 21:42:23 2008  fox

      27* fbt_linux.c: Avoid issue with call to __symbol_get() cause
          incremented mod ref count, which stops us unloading.

Sun Jun  1 00:17:23 2008  fox

      26* Archive: 1.0021

Thu May 29 23:07:39 2008  fox

      25* dtrace_linux.c: Create the cpu_list[] structure which dtrace wants.
          Avoids kernel panic when we hit DTRACEIOC_GO.

      24* drivers/dtrace/dtrace.c: More merge-in from ON solaris.

      23* Archive: 1.0020

Wed May 28 22:31:37 2008  fox

      22* drivers/dtrace/dtrace_ioctl.c: Remove this - integrate back in
          with dtrace.c since we are now more aligned and nearly working.

Mon May 26 14:31:54 2008  fox

      21* drivers/dtrace/*: Fix issue where 'dtrace -l' would keep
          adding the same probes. Needed to mimic the init/attach/open
	  cycle of a proper solaris driver. Fixed various crashes due
	  to this, and allows driver to unload properly - no issues in simple
	  testing, but basic probe placement is not working yet - cannot 
	  plant the probes. Not sure why..yet.

Sun May 25 00:35:12 2008  fox

      20* drivers/dtrace.c: Update to latest opensolaris code to help
          find bugs in driver.

      19* Archive: 1.0018

Tue May 20 23:50:24 2008  fox

      18* cmd/dtrace/dtrace.c: Incorporate getopt() fixes from Apple/Darwin.
          Fixes 'dtrace -n BEGIN', but note this will presently crash your
	  kernel if you run it !

Tue May 13 21:56:09 2008  fox

      17* cmd/dtrace/dtrace.c: Fix issue with getopt() not working when
          presented with this command line:

	  cmd/dtrace/dtrace cmd/dtrace/demo/agg/denorm.d /bin/ls

      16* Update the cmd/dtrace demo to the latest version. They broke
          backwards compatibility ! Why ?! The #pragma changed syntax.
	  Thats very very naughty of them. I do hate lex+flex.

Sun May 11 20:54:47 2008  fox

      15* Update libdtrace to latest opensolaris version.
          Update cmd/dtrace/dtrace.c to latest verison.

Mon May  5 09:48:18 2008  fox

      14* /dev/ctf driver now loads but theres lots of inter-driver
          dependencies which are a pain to manage, so may try
	  and create a consolidated driver.

      13* Archive: 1.0010

Mon Apr 28 20:36:54 2008  fox

      12* Archive: 1.0008

      11* Fix dt_lex.l and dt_grammar.y compile fixed so we dont copy
          files from my install tree to the remote install tree.
	  Fixes problem with dtrace plainly not working at all.

      10* dt_grammar.y: Some minor tweaks to handle compiling with
          bison. Sun have an error in their file (missing ';').

Sun Apr 27 00:03:52 2008  fox

       9* Archive: 1.0007

       8* Archive: 1.0006

       7* Put all binaries into the build/ dir rather than littering the
          source. Not done for drivers yet, since Linux kernel build
	  pollutes us. Also made code do a clean build from start to finish.
	  Ignore warnings - will address these over the course of time.

       6* Archive: 1.0005

       5* Various changes for clean build on FC8/2.6.24.4 kernel. Slightly
          broken Ubuntu...to fix next. First part of the driver works, and
	  making some changes to allow cmd/dtrace to talk to the driver.

Mon Apr 21 22:10:40 2008  fox

       4* Surprise: my first kernel panic. /dev/dtrace is the interface
          and if you cat it ... surprise !

Sun Apr 20 20:51:52 2008  fox

       3* Now builds under ubuntu 2.6.22-14-generic kernel and
          RedHat FC* 2.6.24.4-64.fc8. More portability.

	  If you load the driver, you will have 

	  /proc/dtrace/helper
	  /proc/dtrace/dtrace

	  entries. (Non functional since no plumbing at present).

Sat Apr 19 23:08:09 2008  fox

       2* drivers/dtracedrv.ko finally links correctly. However theres still
          quite a few stubs and broken definitions, so be careful - will
	  likely crash your kernel.

Wed Apr  9 21:56:09 2008  fox

       1* dt_lex.l: Fix flex/lex issues - now parses strings properly and
           dtrace -x nolibs -n BEGIN -e -S
	   seems to work - or at least it doesnt core dump or generate
	   a diagnostic.

